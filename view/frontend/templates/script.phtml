<?php

use Elgentos\Convert\ViewModel\Convert;
use Hyva\Theme\Model\ViewModelRegistry;
use Magento\Framework\Escaper;

/** @var Escaper $escaper */
/** @var ViewModelRegistry $viewModels */

/** @var Convert $config */
$config = $viewModels->require(Convert::class);

?>

<!-- Begin Convert Experiences Script -->
<?php if ($config->isEnabled()): ?>
<script src="<?= $escaper->escapeUrl($config->getGeneralConvertJsUrl()) ?>"></script>

<script>
    function convQPush(eventId) {
        window._conv_q = window._conv_q || [];
        _conv_q.push(["triggerConversion", eventId]);
    }
</script>
<?php else: ?>
    <script>
        function convQPush(eventId) {}
    </script>
<?php endif; ?>
<!-- End Convert Experiences Script -->
